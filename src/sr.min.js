!function(t){var e={},n={},r={paths:e,baseUrl:"",dataMap:n,tempM:{}},i="",a={config:function(t){r.baseUrl=t.baseUrl,h(e,t.paths)},use:function(t){var e=n[x(t)];return e&&"done"==e.status&&"define"==e.type?e.content.exports:void 0},has:function(t){var e=n[x(t)];return e?{exports:e.content&&e.content.exports,status:e.status,type:e.type}:void 0},"delete":function(t){var e=x(t),r=n[e];r&&r.script.remove(),delete n[e]},extend:function(t){t(r,R,q)},error:function(t){console.log(t)},version:"sugarRequire 2.0"},o=[],s=!1,u=document.getElementsByTagName("head")[0],c=function(){},f=function(t){s||(s=!0,setTimeout(function(){for(var t=0;t<o.length;t++)o[t]();o=[],s=!1},0)),o.push(t)},d=function(t){return Object.prototype.toString.call(t).toLowerCase().replace(/(\[object )|(])/g,"")},p=Object.create||function(t){var e=c;return e.prototype=t,new e},v=function(t){return Array.prototype.slice.call(t)},l=function(){return[].forEach?function(t,e){return t.forEach(e)}:function(t,e){for(var n=0,r=t.length;r>n;n++)reMap.push(e(t[n],n))}}(),h=function(t,e){for(var n in e)t[n]=e[n];return t},_=function(t){return t=t.replace(/\?.+$/,""),t.replace(/.js$/g,"")},g=function(t){return t.concat(".js")},m=function(t){var e="",n=t.split("/"),r=n.length-1;return l(n,function(t,n){r>n&&(e+=t+"/")}),e},y=function(){this._map={},this.sub=[],this._ever={}};y.fn=y.prototype,y.fn._get=function(t){return this._map[t]||(this._map[t]={eves:[]})},y.fn.off=function(t,e){var n=this._get(t);if(arguments.length||(delete this._map,this._map=[]),t&&!e&&(this._map[t].eves=[]),t&&e){var r=[];l(n.eves,function(t){t._call!=e&&r.push(t)}),n.eves=r}};var b=function(t,e,n,r){if(t){var i={data:t.data,name:e};return 1==t.type?n(i,r):2==t.type&&f(function(){n(i,r)}),!0}return!1};y.fn.on=function(t,e,n){var r=this._get(t),i=b(this._ever[t],t,e,n);i||r.eves.push({data:n,_call:e})},y.fn.one=function(t,e,n){var r=this._get(t),i=b(this._ever[t],t,e,n);i||r.eves.push({one:!0,data:n,_call:e})},y.fn.trigger=function(t,e){var n=this._get(t),r=n._first;r&&r._call({data:e,name:t},r.data);var i=[];l(n.eves,function(n){n._call({data:e,name:t},n.data),n.one||i.push(n)}),n.eves=i;var a=this.sub;l(a,function(n){n.trigger(t,e)});var o=n._last;o&&o._call({data:e,name:t},o.data)},y.fn.ever=function(t,e,n){var r={};r=n?{type:1,data:e}:{type:2,data:e},this._ever[t]=r,this.trigger(t,e),this.off(t)},y.fn.first=function(t,e,n){var r=this._get(t);r._first={data:n,_call:e}},y.fn.last=function(t,e,n){var r=this._get(t);r._last={data:n,_call:e}},y.fn.clone=function(){var t=new y;return t._ever=p(this._ever),this.sub.push(t),t};var E=function(t){y.apply(this,arguments),this._cid=0,this._dMap=[],this._isInit=!1,this._isCreate=!1,this._ceName=t||"chainend"};E.fn=E.prototype=p(y.prototype),E.fn.create=function(){this._isCreate=!0;var t=this,e=this._cid++;return function(n){t._cid--,t._dMap[e]=n,t._isInit&&0==t._cid&&t.trigger(t._ceName,t._dMap)}},E.fn.init=function(){this._isInit=!0,this._isCreate&&0==this._cid&&this.trigger(this._ceName,this._dMap)};var q=function(t,e){e?(this._origin=e,this._rEvent=new y):(this._origin=this._rEvent=new E,this._origin.init());var n=this,r=this._origin.create();this._rEvent.last("ready",function(){r()}),this._rEvent.on("ready",function(t){n.ready.apply(this,t.data)}),this.doing(function(t){n.loading(t)}),this.fail(function(t){n.error(t)}),this.pub={},this._urls=t,this._subRequire=[]};q.fn=q.prototype,q.fn.ready=c,q.fn.error=c,q.fn.loading=c,q.fn.done=function(t){var e=this;return this._rEvent.on("ready",function(n){t.apply(e,n.data)}),this},q.fn.doing=function(t){return this._rEvent.on("loading",function(e){t(e.data)}),this},q.fn.fail=function(t){return this._rEvent.on("error",function(e){t(e.data)}),this},q.fn.post=function(t){return this.data=t,this},q.fn.hand=function(t){l(this._subRequire,function(e){e.data=t})},q.fn.require=function(){var t=v(arguments),e=new q(t,this._origin);return this._subRequire.push(e),e.pub=this.pub,e};var w=function(t){var e=document.createElement("script");return e.type="text/javascript",e.setAttribute("async",!0),e.src=t,e},M=function(t){var e=t.split(/\//g),n=[];return l(e,function(t){return".."==t&&n.length&&".."!=n.slice(-1)[0]?void n.pop():void n.push(t)}),n.join("/")},x=function(t,e){var n=t.split(/^.\//),a=t.match(/\?.+$/g)||[""];if(n.length>=2){var o=e+g(_(n[1]))+a[0];return o=o.replace(i,""),o=M(o)}var s=r.baseUrl,u=r.paths[t]||t;if(/.+:\/\//g.test(u))return u;var o=s?s.concat("/"+u):u;return g(_(o))+a[0]},R={setDefine:function(t){var e=r.tempM,n=d(e.value),i={exports:{}};switch(t.content=i,n){case"function":var a=!1,o=!1,s=new E("firstRequireEnd"),u=e.value.call({FILE:t.script.src},function(){a=!0;var e=R.require.apply({},arguments);if(e.pub._dir=m(t.script.src),!o){var n=s.create();e._rEvent.on("chainend",n)}return e},i.exports,i);o=!0,a?(s.init(),s.on("firstRequireEnd",function(){t.status="done",t.event.ever("done",i.exports)})):(u&&(i.exports=u),t.status="done",t.event.ever("done",i.exports));break;default:t.status="done",i.exports=e.value,t.event.ever("done",e.value)}},deferBrain:function(t){var e=t.event.sub;l(e,function(e){t.content.call({FILE:t.script.src,data:e.data},function(){var e=R.require.apply({},arguments);return e.pub._dir=m(t.script.src),e},function(t){e.trigger("done",t)},function(t){e.trigger("error",t)})}),t.event.sub=[]},mProcess:function(t){var e=t.event,i=r.tempM;if(i){var a=i.name;switch(d(a)){case"array":l(a,function(e){n[e]=t});break;case"string":n[a]=t}}switch(i.type){case"define":t.type="define",R.setDefine(t);break;case"defer":t.type="defer",t.content=i.value,R.deferBrain(t);break;default:t.type="file",t.status="done",e.ever("done")}r.tempM={}},loadScript:function(t,e){var n=w(t);n.onload=function(){e({status:"succeed",script:n})},n.onerror=function(){e({status:"error",script:n})},u.appendChild(n)},scriptAgent:function(t){var e="";if(n[t]){e=n[t];var r=e.event;return e.type?"defer"==e.type?(f(function(){R.deferBrain(e)}),r.clone()):r:r.clone()}var r=new y;return e=n[t]={status:"wait",event:r},R.loadScript(t,function(t){switch(h(e,t),r.ever(t.status),t.status){case"succeed":R.mProcess(e)}}),r.last("done",function(){r.sub=[]}),r.clone()},groupScript:function(t,e){var n=new E("allloadend"),r=[],i=[],o=function(t,e,a,o,s){n.trigger("loading",{id:t,sucess:r,total:e,errors:i,input:a,url:o,status:s})};return l(t,function(s,u){var c=x(s,e.pub._dir),f=R.scriptAgent(c,e);e.data&&(f.data=e.data);var d=n.create();f.one("done",function(e){var n=e.data;r.push(s),f.off("error"),o(u,t,s,c,"succeed"),d(n)}),f.one("error",function(){i.push(s),f.off("done"),o(u,t,s,c,"error");var e={id:u,input:s,url:c};n.trigger("error",e),a.error(e)})}),n.init(),n},splitter:function(t){var e=t._urls,n=R.groupScript(e,t);n.on("allloadend",function(e){t._rEvent.trigger("ready",e.data),l(t._subRequire,function(t){R.splitter(t)})}),n.on("loading",function(e){t._rEvent.trigger("loading",e.data)}),n.on("error",function(e){t._rEvent.trigger("error",e.data)})},require:function(){var t=v(arguments),e=new q(t);return f(function(){R.splitter(e)}),e},define:function(t,e){r.tempM={type:"define",value:t,name:e}},defer:function(t,e){r.tempM={type:"defer",value:t,name:e}}};a.require=R.require,a.define=R.define,a.defer=R.defer,t.sr=a,!t.require&&(t.require=R.require),!t.define&&(t.define=R.define),!t.defer&&(t.defer=R.defer),i=m(location.href),t.BindEvent=y,t.GatherEvent=E,t.Require=q,t.R=R,t.baseResources=r}(window);